<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Minha Loja Virtual</title>
  <style>
    /* ... (mantenha todo o CSS original inclusive do google-btn) ... */
  </style>
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
</head>
<body>
  <!-- ... (mantenha todo o HTML original com o botÃ£o do Google) ... -->

  <script>
    // ConfiguraÃ§Ã£o do Firebase
     const firebaseConfig = {
      apiKey: "AIzaSyDlUQbbTP29VqBVmzOGHhfc67R1DTRPwxg",
      authDomain: "gitautenticatio.firebaseapp.com",
      projectId: "gitautenticatio",
      storageBucket: "gitautenticatio.firebasestorage.app",
      messagingSenderId: "21514234895",
      appId: "1:21514234895:web:d34dc4c44baf586d2cc77a",
      databaseURL: "https://gitautenticatio-default-rtdb.firebaseio.com",

    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const database = firebase.database();

    // Provedor do Google
    const googleProvider = new firebase.auth.GoogleAuthProvider();
    googleProvider.addScope('https://www.googleapis.com/auth/userinfo.email');

    // Login com Google
    document.getElementById('googleLoginBtn').addEventListener('click', () => {
      auth.signInWithPopup(googleProvider)
        .then(async (result) => {
          await checkAdminPermissions(result.user);
          alert(`Bem-vindo ${result.user.displayName}!`);
        })
        .catch((error) => {
          alert('Erro no login: ' + error.message);
        });
    });

    // Verificar privilÃ©gios de admin
    async function checkAdminPermissions(user) {
      const adminRef = database.ref('admins/' + user.uid);
      
      adminRef.once('value', (snapshot) => {
        const isAdmin = snapshot.exists();
        document.getElementById('adminPanel').style.display = isAdmin ? 'flex' : 'none';
        
        // Opcional: Salvar no localStorage
        localStorage.setItem('isAdmin', isAdmin);
      }).catch((error) => {
        console.error('Erro ao verificar admin:', error);
      });
    }

    // Sistema de administradores (adicione isto no seu Realtime Database)
    /*
    {
      "admins": {
        "UID_DO_USUARIO1": true,
        "UID_DO_USUARIO2": true
      }
    }
    */

    // ... (mantenha o resto do cÃ³digo de login/logout do e-mail/senha) ...

    // Monitorar estado de autenticaÃ§Ã£o
    auth.onAuthStateChanged((user) => {
      updateAuthUI(user);
      if (user) checkAdminPermissions(user);
    });

    // Atualizar UI
    function updateAuthUI(user) {
      document.getElementById('loginArea').style.display = user ? 'none' : 'flex';
      document.getElementById('userArea').style.display = user ? 'flex' : 'none';
      if (user) {
        const displayName = user.displayName || user.email;
        document.getElementById('welcomeUser').textContent = `Bem-vindo ðŸ˜˜, ${displayName}!`;
      }
    }
  </script>
</body>
</html>
